
{% if site.print-includes-boundaries-comments == true %}
<!-- includes/home-carousel.html  -->
{% endif %}

{% assign debug = true %}

{%- assign pages = "" | split: "" -%}
{%- for carousel_page in site.data.carousel_fr.pages -%}
  {%- assign target_page = site.pages | where: "title", carousel_page.title | first -%}
  {%- assign pages = pages | push: target_page -%}
{%- endfor -%}

{% if debug == true %}
<br><br>
pages = {{ pages | jsonify }}<br>
pages_count = {{ pages | size }}<br>
{% endif %}



<div class="row d-lg-none d-xl-none d-xxl-none">
  <div class="col-lg-6 text-bg-secondary rounded border border-secondary-subtle p-3">
    <h1 class="display-4 fst-italic">Chemins de traverse</h1>
    <div class="my-3 lead">
      <p>Vous souhaitez vivre un week-end ou un séjour insolite 100% nature ?<p>
      <p>L'équipe des Chemins de Traverse vous propose de vivre et d’habiter les forêts du Parc national de Forêts.</p>
      <p>Vous allez séjourner dans une tente nomade, une roulotte ou un lodge, découvrir les secrets des sous-bois, louer un âne pour accompagner vos découvertes, habiter des cabanes insolites, cheminer le long des ruisseaux forestiers ... ou tout simplement profiter du calme et de la sérénité des lieux.</p>
    </div>
  </div>    
  <div class="col-lg-6 rounded">
    <img class="img-fluid rounded" src="https://res.cloudinary.com/dwr0s07kl/image/upload/t_680-16-9/tente-nomade_trqifm.jpg" srcset="https://res.cloudinary.com/dwr0s07kl/image/upload/t_680-16-9/tente-nomade_trqifm.jpg 680w" sizes="(min-width: 1400px) 680px">
  </div>
</div>  

<div id="homeCarousel" class="carousel slide carousel-fade mb-6  d-none d-lg-block d-xl-block d-xxl-block" data-bs-ride="true">
  <div class="carousel-indicators">
    {%- for p in pages -%}
      <button type="button" data-bs-target="#homeCarousel" data-bs-slide-to="{{ forloop.index0 }}" aria-label="Slide {{ forloop.index }}" {% if forloop.index == 1 %} class="active"{% endif %} ></button>
    {%- endfor -%}
  </div> 

  <div class="carousel-inner rounded-3">

{%- for p in pages -%}
    <div class="carousel-item {% if forloop.index == 1 %} active {% endif %} rounded-3">
      {%- include responsive_image.html model="12w" target_page=p -%}
      <div class="container"> 
        <div class="carousel-caption text-bg-carousel rounded p-2 m-2"> 
          <h2>{{ p.title }}</h2> 
          <div class="opacity-75">{{ p.intro | markdownify }}</div> 
          <p><a class="btn btn-primary btn-sm" href="{{ p.url | relative_url }}">En savoir plus</a></p> 
        </div> 
      </div> 
    </div> 
{%- endfor -%}

  </div> 
  <button class="carousel-control-prev" type="button" data-bs-target="#homeCarousel" data-bs-slide="prev"> <span class="carousel-control-prev-icon" aria-hidden="true"></span> <span class="visually-hidden">Previous</span> </button> 
  <button class="carousel-control-next" type="button" data-bs-target="#homeCarousel" data-bs-slide="next"> <span class="carousel-control-next-icon" aria-hidden="true"></span> <span class="visually-hidden">Next</span> </button>
</div>

{% if site.print-includes-boundaries-comments == true %}
<!-- end includes/home-carousel.html  -->
{% endif %}

