{%- if site.print-includes-boundaries-comments == true %}
<!-- _includes/date-fr.html -->
{%- endif %}

{% comment %} ===========================================
Include that transforms a datetime to a french form
using ruby date formating
hints here : https://strftime.net/

Passed arguments :

  - date_start : a datetime value stored as 2026-02-16 09:00:00 +0100

  - date_end : a datetime value stored as 2026-02-16 09:00:00 +0100

  - format : specifies output format for the date
    default : long

    available formats : 
      - long : returns "le vendredi 20 Février 2026 de 17h00 à 20h00" for one day event
                       "du jeudi 19 Février 2026 à 9h00 au vendredi 20 Février 2026 à 17h00" for multi days event
      - short : returns "le ven. 20 Fév. 2026 de 17h00 à 20h00" for one day event
                        "du jeu. 19 Fév. 2026 à 9h00 au ven. 20 Fév. 2026 à 17h00" for multi days event
      - badge : returns "jeu. 19 Fév." for visible date badge on events

=========================================== {% endcomment %}
{% assign debug = false %}

{%- assign date_start = include.date_start %}
{%- assign date_end = include.date_end %}

{% if debug == true %}
<br>date_start : {{ date_start }}
<br>date_end : {{ date_end }}
{% endif %}

{% if include.format %}
  {%- assign format = include.format %}
{% else %}
  {%- assign format = "long" %}
{% endif %}

{% comment %} =====  French translation stored here ===== {% endcomment %}
{% assign day_name_long = "lundi,mardi,mercredi,jeudi,vendredi,samedi,dimanche" | split: "," %}
{% assign day_name_short = "Lun.,Mar.,Mer.,Jeu.,Ven.,Sam.,Dim." | split: "," %}
{% assign month_name_long = "Janvier,Février,Mars,Avril,Mai,Juin,Juillet,Août,Septembre,Octobre,Novembre,Décembre" | split: "," %}
{% assign month_name_short = "Jan.,Fév.,Mar.,Avr.,Mai,Juin,Juil.,Août,Sept.,Oct.,Nov.,Déc." | split: "," %}

{% comment %} ===== end translations ===== {% endcomment %}

{% comment %} ===== check if it's a same day event ===== 
Two conditions :
  - start and end must be in a one day timeframe mesured in seconds
  - if they are in this timeframe day number must be the same
{% endcomment %}

{% assign same_day_event = false %}
{% assign one_day_seconds = 86400 %}
{% assign date_start_timestamp = date_start | date: "%s" | to_integer %}
{% assign date_end_timestamp = date_end | date: "%s" | to_integer %}
{% assign timeframe_seconds = date_end_timestamp | minus: date_start_timestamp %}
{% assign date_start_number = date_start | date: "%w" | to_integer %}
{% assign date_end_number = date_end | date: "%w" | to_integer %}

{% if timeframe_seconds < one_day_seconds %}
  {% assign one_day_timeframe = true %}
  {% if date_start_number == date_end_number %}
    {% assign same_day_event = true %}
  {% endif %}
{% else %}
  {% assign one_day_timeframe = false %}
{% endif %}

{% if debug == true %}
<br>date_start_timestamp : {{ date_start_timestamp }}
<br>date_end_timestamp : {{ date_end_timestamp }}
<br>timeframe_seconds : {{ timeframe_seconds }}
<br>one_day_timeframe : {{ one_day_timeframe }}
<br>date_start_number : {{ date_start_number }}
<br>date_end_number : {{ date_end_number }}
<br>same_day_event : {{ same_day_event }}
{% endif %}
{% comment %} ===== end check same day event ===== {% endcomment %}


{% comment %} ++++++++++++++++++++++ Get all necessary values to be displayed ++++++++++++++++++++++ {% endcomment %}

  {% comment %} %w returns a day number from 0 to 6, just cast to integer {% endcomment %}
  {%- assign start_day_index = date_start | date: "%w" | to_integer %}
  {% assign date_start_day_name_long = day_name_long[ start_day_index ] %}
  {% assign date_start_day_name_short = day_name_short[ start_day_index ] %}
  {% assign start_day_number = date_start | date: "%d"%}
  {% comment %} %m returns a month number from "01" to "12", just substract 1 to cast to integer and correspond to our array that is 0 indexed{% endcomment %}
  {%- assign start_month_index = date_start | date: "%m" | minus: 1 %}
  {% assign start_month_name_long = month_name_long[ start_month_index ] %}
  {% assign start_month_name_short = month_name_short[ start_month_index ] %}
  {% assign start_year = date_start | date: "%Y"%}
  {% assign start_hour = date_start | date: "%H"%}
  {% assign start_minutes = date_start | date: "%M"%}

  {% comment %} %w returns a day number from 0 to 6, just cast to integer {% endcomment %}
  {%- assign end_day_index = date_end | date: "%w" | to_integer %}
  {% assign date_end_day_name_long = day_name_long[ end_day_index ] %}
  {% assign date_end_day_name_short = day_name_short[ end_day_index ] %}
  {% assign end_day_number = date_end | date: "%d"%}
  {% comment %} %m returns a month number from "01" to "12", just substract 1 to cast to integer and correspond to our array that is 0 indexed{% endcomment %}
  {%- assign end_month_index = date_end | date: "%m" | minus: 1 %}
  {% assign end_month_name_long = month_name_long[ end_month_index ] %}
  {% assign end_month_name_short = month_name_short[ end_month_index ] %}
  {% assign end_year = date_end | date: "%Y"%}
  {% assign end_hour = date_end | date: "%H"%}
  {% assign end_minutes = date_end | date: "%M"%}


{% comment %}
============== Now depending on format passed, print the date
{% endcomment %}

<span class="envent-date">
{% case format %}
  {% when "long" %}
    {% if same_day_event %}
      le {{ date_start_day_name_long }} {{ start_day_number }} {{ start_month_name_long }} {{ start_year }} de 
      {{ start_hour }}h{{ start_minutes }} à {{ end_hour }}h{{ end_minutes }}
    {% else %}
      du {{ date_start_day_name_long }} {{ start_day_number }} {{ start_month_name_long }} {{ start_year }} à {{ start_hour }}h{{ start_minutes }} <br>au
    {{ date_end_day_name_long }} {{ end_day_number }} {{ end_month_name_long }} {{ end_year }} à {{ end_hour }}h{{ end_minutes }}
    {% endif %}
  {% when "short" %}
    {% if same_day_event %}
      le {{ date_start_day_name_short }} {{ start_day_number }} {{ start_month_name_short }} {{ start_year }} de 
      {{ start_hour }}h{{ start_minutes }} à {{ end_hour }}h{{ end_minutes }}
    {% else %}
      du {{ date_start_day_name_short }} {{ start_day_number }} {{ start_month_name_short }} {{ start_year }} à {{ start_hour }}h{{ start_minutes }} <br>au
    {{ date_end_day_name_short }} {{ end_day_number }} {{ end_month_name_short }} {{ end_year }} à {{ end_hour }}h{{ end_minutes }}
    {% endif %}
  {% when "badge" %}
    {{ date_start_day_name_short }} {{ start_day_number }} {{ start_month_name_short }}

{% endcase %}
</span>
{%- if site.print-includes-boundaries-comments == true %}
<!-- end _includes/date-fr.html -->
{%- endif %}